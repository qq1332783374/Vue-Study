<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/bootstrap.css" />
		<script type="text/javascript" src="js/vue.js" ></script>
	</head>
	<body>
		<div id="app">
			<div class="container">
				<div class="col-md-6">
					<table class="table table-bordered">  
						<tr>
							<td>编号</td>
							<td>商品</td>
							<td>价格</td>
							<td>数量</td>
							<td>描述</td>
							<td>
								操作
							</td>
						</tr>
						<tr v-for="item in shopInfo">
							<td>
								{{item.id}}
							</td>
							<td>
								{{item.shopName}}
							</td>
							
							<td>
								{{item.shopPrice}}
							</td>
							<td>
								{{item.shopNum}}
							</td>
							<td>
								{{item.shopDesc}}
							</td>
							<td>
								<button @click="add(item)">-</button>
								<button @click="subtract(item)">+</button>
							</td>
						</tr>
					</table>
				</div>
				<div class="col-md-4">
					<ul class="list-group">
						<li class="list-group-item" v-for="(item,index) in list" @click="addInfo(item)">
							{{item.shopName}}
						</li>
						
					</ul>
				</div>
			</div>
		</div>
		<script>
			new Vue({
				el:"#app",
				data:{
					list:[
						{id:1,shopName:"商品1",shopPrice:100,shopNum:1,shopDesc:"这是描述1"},
						{id:2,shopName:"商品2",shopPrice:100,shopNum:1,shopDesc:"这是描述2"},
						{id:3,shopName:"商品3",shopPrice:100,shopNum:1,shopDesc:"这是描述3"},
						{id:4,shopName:"商品4",shopPrice:100,shopNum:1,shopDesc:"这是描述4"},
						{id:5,shopName:"商品5",shopPrice:100,shopNum:1,shopDesc:"这是描述5"}
					],
					shopInfo:[]
				},
				methods:{
					addInfo:function(item){
						var isHave = false
						var tabIndex = -999
//						console.log(item)
						var basket = {
							id:item.id,
							shopName:item.shopName,
							shopPrice:item.shopPrice,
							shopNum:item.shopNum,
							shopDesc:item.shopDesc
						}
//						this.shopInfo.push(basket)
						if(this.shopInfo.length>0){
							//有数据情况
							for (var i=0;i<this.shopInfo.length;i++) {
								if(this.shopInfo[i].id == basket.id){
									tabIndex = i
									isHave = true
								}
							}
							
							//如果它存在
							if(isHave){
								this.shopInfo[tabIndex].shopNum++
							}else {
								this.shopInfo.push(basket)
							}
						}else {
							//没有数据
							this.shopInfo.push(basket)
						}
					},
					add(item){
						
					},
					subtract(item){
						console.log(item.shopNum)
					}
				}
			})
		</script>
	</body>
</html>
